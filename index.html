<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Control de Asistencia Escolar</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#4285f4">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="Asistencia Escolar">
</head>
<body>
    <div class="app-container">
        <header class="app-header">
            <h1>ğŸ« Control de Asistencia</h1>
            <div class="date-display" id="currentDate"></div>
        </header>

        <main class="main-content">
            <!-- BotÃ³n principal para escanear QR -->
            <div class="scan-section">
                <button id="scanButton" class="scan-btn">
                    ğŸ“· Escanear CÃ³digo QR
                </button>
                <div id="camera-container" class="camera-container hidden">
                    <video id="video" autoplay></video>
                    <canvas id="canvas" class="hidden"></canvas>
                    <button id="stopScanBtn" class="stop-btn">âŒ Cerrar CÃ¡mara</button>
                </div>
            </div>

            <!-- SecciÃ³n de estadÃ­sticas del dÃ­a -->
            <div class="stats-section">
                <h2>ğŸ“Š EstadÃ­sticas de Hoy</h2>
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-number" id="totalStudents">0</div>
                        <div class="stat-label">Estudiantes</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="totalEntries">0</div>
                        <div class="stat-label">Entradas</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="totalExits">0</div>
                        <div class="stat-label">Salidas</div>
                    </div>
                </div>
            </div>

            <!-- Lista de registros del dÃ­a -->
            <div class="records-section">
                <h2>ğŸ“ Registros de Hoy</h2>
                <div id="recordsList" class="records-list">
                    <div class="no-records">
                        No hay registros aÃºn. Â¡Escanea el primer cÃ³digo QR!
                    </div>
                </div>
            </div>

            <!-- Botones de navegaciÃ³n -->
            <div class="nav-buttons">
                <button id="reportsBtn" class="nav-btn">
                    ğŸ“ˆ Ver Reportes
                </button>
                <button id="exportBtn" class="nav-btn">
                    ğŸ“¤ Exportar Datos
                </button>
            </div>

            <!-- Nuevos botones de herramientas -->
            <div class="nav-buttons" style="margin-top: 15px;">
                <button id="generatorBtn" class="nav-btn" style="background: linear-gradient(135deg, #ff9a9e, #fecfef);">
                    ğŸ« Generar CÃ³digos QR
                </button>
                <button id="helpBtn" class="nav-btn" style="background: linear-gradient(135deg, #a8edea, #fed6e3);">
                    â“ Ayuda
                </button>
            </div>
        </main>
    </div>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/jsqr@1.4.0/dist/jsQR.min.js"></script>
    <script src="app.js"></script>
    
    <script>
        // Event listener para el botÃ³n del generador
        document.addEventListener('DOMContentLoaded', function() {
            const generatorBtn = document.getElementById('generatorBtn');
            const helpBtn = document.getElementById('helpBtn');
            
            if (generatorBtn) {
                generatorBtn.addEventListener('click', function() {
                    window.location.href = 'generador.html';
                });
            }
            
            if (helpBtn) {
                helpBtn.addEventListener('click', function() {
                    showHelpModal();
                });
            }
        });
        
        // FunciÃ³n de ayuda
        function showHelpModal() {
            const helpContent = `
ğŸ« SISTEMA DE CONTROL DE ASISTENCIA ESCOLAR

ğŸ“± CÃ“MO USAR:
1. Escanear cÃ³digo QR del estudiante
2. Primera lectura = ENTRADA
3. Segunda lectura = SALIDA
4. Ver reportes por fecha
5. Exportar datos en Excel

ğŸ« GENERAR CÃ“DIGOS QR:
- Individual: Un estudiante a la vez
- Masivo: Lista completa en CSV
- Formato: matricula,nombre,grado,grupo

ğŸ“Š REPORTES:
- EstadÃ­sticas diarias
- Filtros por fecha
- ExportaciÃ³n automÃ¡tica

ğŸ’¡ CONSEJOS:
- MantÃ©n buena iluminaciÃ³n para escanear
- Los datos se guardan automÃ¡ticamente
- Funciona sin internet despuÃ©s de cargar

â“ Â¿PROBLEMAS?
- Verifica permisos de cÃ¡mara
- AsegÃºrate de usar HTTPS
- Contacta al administrador
            `;
            
            alert(helpContent);
        }
    </script>
</body>
</html>
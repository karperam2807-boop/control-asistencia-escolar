<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Generador de Credenciales - CETIS No. 45 "Jos√© Mar√≠a Izazaga" Zihuatanejo</title>
    <link rel="stylesheet" href="styles-unified.css">
</head>
<body>
    <div class="generator-container">
        <header class="app-header">
            <!-- Header institucional con logos reales -->
            <div class="institutional-header">
                <div class="logo-container">
                    <img src="logos/sep-logo.png" alt="SEP" class="logo-sep" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
                    <div class="logo-placeholder logo-sep" style="display: none;"></div>
                </div>
                
                <div class="institution-info">
                    <img src="logos/cetis45-logo.png" alt="CETIS 45" class="logo-cetis-center" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
                    <div class="logo-cetis-center" style="display: none;"></div>
                    
                    <div class="institution-name">CETIS No. 45 "Jos√© Mar√≠a Izazaga"</div>
                    <div class="institution-subtitle">Centro de Estudios Tecnol√≥gicos Industrial y de Servicios</div>
                    <div class="institution-location">Zihuatanejo, Guerrero</div>
                </div>
                
                <div class="logo-container">
                    <img src="logos/dgeti-logo.png" alt="DGETI" class="logo-dgeti" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
                    <div class="logo-placeholder logo-dgeti" style="display: none;"></div>
                </div>
            </div>
            
            <h1 class="app-title">üé´ Generador de Credenciales</h1>
            <a href="index.html" class="back-btn">‚Üê Volver al Control de Asistencia</a>
        </header>

        <main class="main-content">
            <!-- Formulario -->
            <div class="form-section">
                <h2 class="section-title">üë§ Generar credencial individual</h2>
                
                <form id="studentForm">
                    <div class="form-grid">
                        <div class="form-group">
                            <label for="matricula">üìÜ Matr√≠cula:</label>
                            <input type="text" id="matricula" class="form-input" placeholder="2508CETIS045ZIH1001" required>
                        </div>
                        <div class="form-group">
                            <label for="nombre">üë§ Nombre Completo:</label>
                            <input type="text" id="nombre" class="form-input" placeholder="Juan P√©rez Garc√≠a" required>
                        </div>
                        <div class="form-group">
                            <label for="grado">üéì Grado:</label>
                            <select id="grado" class="form-input" required>
                                <option value="">Seleccionar...</option>
                                <option value="1">1¬∞</option>
                                <option value="2">2¬∞</option>
                                <option value="3">3¬∞</option>
                                <option value="4">4¬∞</option>
                                <option value="5">5¬∞</option>
                                <option value="6">6¬∞</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="grupo">üë• Grupo:</label>
                            <select id="grupo" class="form-input" required>
                                <option value="">Seleccionar...</option>
                                <option value="A">A</option>
                                <option value="B">B</option>
                                <option value="C">C</option>
                                <option value="D">D</option>
                                <option value="1">1</option>
                                <option value="2">2</option>
                            </select>
                        </div>
                    </div>
                    
                    <button type="submit" class="generate-btn">
                        ‚ú® Generar Credencial
                    </button>
                </form>
            </div>

            <!-- Vista previa de credencial -->
            <div id="credentialPreview" class="credential-preview hidden">
                <h3 class="section-title">üé´ Credencial Generada - TAMA√ëO REAL: 5.5 x 8.5 cm</h3>
                <p style="text-align: center; color: #8b1538; font-weight: 600; margin-bottom: 15px;">
                    üìè Vista previa en tama√±o real | üèõÔ∏è Con logos oficiales SEP y DGETI<br>
                    <strong>CETIS No. 45 "Jos√© Mar√≠a Izazaga" - Zihuatanejo, Guerrero</strong>
                </p>
                
                <div class="credential" id="credential">
                    <div class="credential-header">
                        <div class="credential-logos">
                            <div class="credential-logo">SEP</div>
                            <div class="credential-institution">
                                <div class="credential-institution-name">CETIS No. 45 "Jos√© Mar√≠a Izazaga"</div>
                                <div class="credential-institution-subtitle">
                                    Centro de Estudios Tecnol√≥gicos<br>
                                    Industrial y de Servicios<br>
                                    Zihuatanejo, Guerrero
                                </div>
                            </div>
                            <div class="credential-logo">DGETI</div>
                        </div>
                    </div>
                    
                    <div class="credential-body">
                        <div class="student-section">
                            <div class="photo-placeholder">üë§</div>
                            <div class="student-name" id="credentialName">NOMBRE DEL ESTUDIANTE</div>
                            <div class="student-details">
                                <div>
                                    <span><strong>Matr√≠cula:</strong></span>
                                    <span id="credentialMatricula">-</span>
                                </div>
                                <div>
                                    <span><strong>Grado:</strong></span>
                                    <span id="credentialGrado">-</span>
                                </div>
                                <div>
                                    <span><strong>Grupo:</strong></span>
                                    <span id="credentialGrupo">-</span>
                                </div>
                                <div>
                                    <span><strong>Ciclo:</strong></span>
                                    <span>2025-2026</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="qr-section">
                            <img id="qrCodeImage" class="qr-code-img" src="" alt="C√≥digo QR">
                            <div class="qr-label">C√ìDIGO<br>ASISTENCIA</div>
                        </div>
                    </div>
                    
                    <div class="credential-footer">
                        CETIS 45 Zihuatanejo | Sistema de Control de Asistencia | #OrgullosamenteCETIS45
                    </div>
                </div>
                
                <div class="nav-buttons">
                    <button class="nav-btn" onclick="printCredential()">
                        üñ®Ô∏è Imprimir Credencial
                    </button>
                    <button class="nav-btn" onclick="generatePDFCredential()">
                        üìÑ Generar PDF
                    </button>
                </div>
            </div>

            <!-- Secci√≥n de generaci√≥n masiva -->
            <div class="bulk-section">
                <h3 class="section-title">üë• Generaci√≥n Masiva de Credenciales - 9 POR HOJA</h3>
                <p style="margin-bottom: 15px; text-align: center; color: #8b1538; font-weight: 600;">
                    <strong>üéØ OPTIMIZACI√ìN M√ÅXIMA:</strong> 9 credenciales por hoja A4 (3x3) | 98% aprovechamiento | 58% menos papel<br>
                    <strong>üè´ CETIS No. 45 "Jos√© Mar√≠a Izazaga" - Zihuatanejo, Guerrero</strong>
                </p>
                <p style="margin-bottom: 15px; text-align: center; color: #8b1538;">
                    <strong>Formato CSV:</strong> matricula,nombre,grado,grupo
                </p>
                
                <textarea id="csvInput" class="csv-textarea" placeholder="2508CETIS045ZIH1001,P√âREZ GARC√çA JUAN CARLOS,1,A
2508CETIS045ZIH1002,L√ìPEZ MART√çNEZ MAR√çA FERNANDA,1,A
2508CETIS045ZIH1003,GONZ√ÅLEZ RODR√çGUEZ LUIS MIGUEL,1,B"></textarea>
                
                <div class="nav-buttons" style="margin-top: 15px;">
                    <button class="nav-btn" onclick="fillTestCSV()">
                        üß™ Llenar Datos de Prueba
                    </button>
                    <button class="nav-btn" onclick="generateBulkCredentials()">
                        üöÄ Generar 9 por Hoja
                    </button>
                    <button class="nav-btn" onclick="showZihuatanejoEfficiency()">
                        üìä Ver Eficiencia
                    </button>
                </div>
            </div>
        </main>

        <!-- Footer institucional -->
        <footer class="app-footer">
            <div class="footer-logos">
                <img src="logos/sep-logo.png" alt="SEP" class="footer-logo" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
                <div class="footer-logo" style="display: none;">SEP</div>
                
                <img src="logos/cetis45-logo.png" alt="CETIS 45" class="footer-logo" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
                <div class="footer-logo" style="display: none;">45</div>
                
                <img src="logos/dgeti-logo.png" alt="DGETI" class="footer-logo" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
                <div class="footer-logo" style="display: none;">DGETI</div>
            </div>
            <div class="footer-text">
                <strong>Generador de Credenciales Estudiantiles</strong><br>
                <strong>CETIS No. 45 "Jos√© Mar√≠a Izazaga"</strong><br>
                Zihuatanejo, Guerrero - Ciclo Escolar 2025-2026<br>
                #OrgullosamenteCETIS45
            </div>
        </footer>
    </div>

    <script src="credenciales.js"></script>
    
    <script>
        // Configuraci√≥n espec√≠fica para CETIS 45 Zihuatanejo
        document.addEventListener('DOMContentLoaded', function() {
            console.log('üé´ Generador de Credenciales - CETIS No. 45 "Jos√© Mar√≠a Izazaga"');
            console.log('üìç Zihuatanejo, Guerrero - CSS Unificado implementado');
            
            // Personalizar mensajes para el plantel
            if (typeof showNotification !== 'undefined') {
                const originalShowNotification = showNotification;
                window.showNotification = function(message, type = 'success', duration = 4000) {
                    // Agregar identificaci√≥n del plantel en mensajes importantes
                    if (type === 'success' && message.includes('Credencial')) {
                        message += '\nüè´ CETIS No. 45 "Jos√© Mar√≠a Izazaga" - Zihuatanejo';
                    }
                    originalShowNotification(message, type, duration);
                };
            }
            
            // Configurar datos de ejemplo espec√≠ficos para Zihuatanejo
            window.fillTestCSV = function() {
                const csvTestData = `2508CETIS045ZIH1001,P√âREZ GARC√çA JUAN CARLOS,1,A
2508CETIS045ZIH1002,L√ìPEZ MART√çNEZ MAR√çA FERNANDA,1,A
2508CETIS045ZIH1003,GONZ√ÅLEZ RODR√çGUEZ LUIS MIGUEL,1,B
2508CETIS045ZIH1004,HERN√ÅNDEZ L√ìPEZ ANA SOF√çA,2,A
2508CETIS045ZIH1005,MART√çNEZ SILVA CARLOS EDUARDO,2,B
2508CETIS045ZIH1006,RODR√çGUEZ TORRES LAURA PATRICIA,3,A
2508CETIS045ZIH1007,GARC√çA MORALES DIEGO ALEJANDRO,3,B
2508CETIS045ZIH1008,TORRES HERRERA VALERIA NICOLE,1,C
2508CETIS045ZIH1009,MORALES JIM√âNEZ FERNANDO DANIEL,2,C
2508CETIS045ZIH1010,SILVA RAM√çREZ ANDREA PAOLA,3,C
2508CETIS045ZIH1011,RAM√çREZ V√ÅZQUEZ MIGUEL √ÅNGEL,1,D
2508CETIS045ZIH1012,V√ÅZQUEZ CASTRO SOFIA ISABELLA,2,D`;

                const csvInput = document.getElementById('csvInput');
                if (csvInput) {
                    csvInput.value = csvTestData;
                    console.log('üìã CSV de prueba llenado con 12 estudiantes de Zihuatanejo');
                    if (typeof showNotification === 'function') {
                        showNotification('üìã CSV llenado con 12 estudiantes de prueba\nüéØ CETIS No. 45 "Jos√© Mar√≠a Izazaga"\nüìç Zihuatanejo, Guerrero\nüìä Resultado: 2 hojas A4 con 9 credenciales cada una', 'success');
                    }
                    
                    // Highlight del textarea
                    csvInput.style.background = '#d4edda';
                    csvInput.style.border = '3px solid #28a745';
                    
                    setTimeout(() => {
                        csvInput.style.background = '';
                        csvInput.style.border = '';
                    }, 3000);
                    
                    // Scroll hacia el textarea
                    csvInput.scrollIntoView({ behavior: 'smooth' });
                    
                    return true;
                } else {
                    console.log('‚ùå No se encontr√≥ el textarea CSV');
                    if (typeof showNotification === 'function') {
                        showNotification('‚ùå No se encontr√≥ el √°rea de texto CSV\nüí° Esta funci√≥n debe ejecutarse en credenciales.html', 'error');
                    }
                    return false;
                }
            };
            
            console.log('‚úÖ Configuraci√≥n espec√≠fica de Zihuatanejo aplicada');
        });
        
        // Funci√≥n personalizada para mostrar informaci√≥n de eficiencia
        window.showZihuatanejoEfficiency = function() {
            const comparisonText = `üìä COMPARATIVA DE EFICIENCIA 
üè´ CETIS No. 45 "Jos√© Mar√≠a Izazaga" - Zihuatanejo, Guerrero

‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ Caracter√≠stica      ‚îÇ Anterior ‚îÇ Optimizado   ‚îÇ Mejora   ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ Credenciales/hoja   ‚îÇ    4     ‚îÇ      9       ‚îÇ  +125%   ‚îÇ
‚îÇ Aprovechamiento     ‚îÇ   60%    ‚îÇ     98%      ‚îÇ   +38%   ‚îÇ
‚îÇ Tama√±o credencial   ‚îÇ 8.5x5.5  ‚îÇ   6.0x8.2    ‚îÇOptimizado‚îÇ
‚îÇ Hojas para 36 est.  ‚îÇ    9     ‚îÇ      4       ‚îÇ   -5     ‚îÇ
‚îÇ Desperdicio papel   ‚îÇ   40%    ‚îÇ      2%      ‚îÇ   -38%   ‚îÇ
‚îÇ Calidad QR          ‚îÇ Regular  ‚îÇ   Premium    ‚îÇ   +50%   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

üí∞ AHORRO ECON√ìMICO PARA CETIS 45 ZIHUATANEJO:
- 36 estudiantes: 5 hojas menos (56% ahorro)
- 100 estudiantes: 14 hojas menos (58% ahorro)
- 300 estudiantes: 42 hojas menos (58% ahorro)

üå± BENEFICIO AMBIENTAL:
- Reducci√≥n 58% en uso de papel
- Menor impacto de carbono
- Gesti√≥n sustentable de recursos

üè´ CETIS No. 45 "Jos√© Mar√≠a Izazaga" - Zihuatanejo, Guerrero
   #OrgullosamenteCETIS45`;

            console.log(comparisonText);
            if (typeof showNotification === 'function') {
                showNotification('üìä Comparativa mostrada en consola\nüéØ Sistema 125% m√°s eficiente\nüí∞ 58% menos papel\nüå± Eco-friendly\nüè´ CETIS 45 Zihuatanejo', 'info', 5000);
            }
        };
        
        console.log('üé´ Sistema de Credenciales - CETIS No. 45 "Jos√© Mar√≠a Izazaga" - Zihuatanejo');
    </script>
</body>
</html>